<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Organise Videos By Resolution - Karan Kadam</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Sort video files using a quick and dirty script in Python" />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="/posts/organise-videos-by-resolution/">
  <meta property="og:site_name" content="Karan Kadam">
  <meta property="og:title" content="Organise Videos By Resolution">
  <meta property="og:description" content="Sort video files using a quick and dirty script in Python">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-18T21:40:39+09:30">
    <meta property="article:modified_time" content="2024-05-18T21:40:39+09:30">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Code">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Scripts">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Organise Videos By Resolution">
  <meta name="twitter:description" content="Sort video files using a quick and dirty script in Python">

	
        <link href="/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css" />

	
	

	
	
	
	
		
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="/">Karan Kadam</a>
	</div>
	<nav>
		
		<a href="/contact/">Contact</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Organise Videos By Resolution</h1>
			<div class="meta">Posted on May 18, 2024</div>
		</div>
		

		<section class="body">
			<p>Recently I was clearing out some old movie rips that I had created from VideoCDs and DVDs many years ago. I wanted a quick and dirty way to organise these i.e. get rid of the videos of resolutions lower than 720p (1280x720)</p>
<p>With LLMs all the rage at the moment, all it took is a few prompts and corrections and in 15 minutes I had this script ready to go -</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">os</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">shutil</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">moviepy.editor</span> <span style="color:#a2f;font-weight:bold">import</span> VideoFileClip
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">analyze_and_move_folders</span>(parent_folder):
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"># Create the &#39;inferior&#39; folder if it doesn&#39;t exist</span>
</span></span><span style="display:flex;"><span>    inferior_folder <span style="color:#666">=</span> os<span style="color:#666">.</span>path<span style="color:#666">.</span>join(parent_folder, <span style="color:#b44">&#39;inferior&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#a2f;font-weight:bold">not</span> os<span style="color:#666">.</span>path<span style="color:#666">.</span>exists(inferior_folder):
</span></span><span style="display:flex;"><span>        os<span style="color:#666">.</span>makedirs(inferior_folder)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"># Walk through all subdirectories</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span> root, dirs, files <span style="color:#a2f;font-weight:bold">in</span> os<span style="color:#666">.</span>walk(parent_folder):
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"># Check if the current directory contains any video files</span>
</span></span><span style="display:flex;"><span>        video_files_found <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> file <span style="color:#a2f;font-weight:bold">in</span> files:
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span> file<span style="color:#666">.</span>endswith((<span style="color:#b44">&#39;.mkv&#39;</span>, <span style="color:#b44">&#39;.avi&#39;</span>, <span style="color:#b44">&#39;.mp4&#39;</span>)):
</span></span><span style="display:flex;"><span>                video_files_found <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> video_files_found:
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"># Load the first video file to check its resolution</span>
</span></span><span style="display:flex;"><span>            first_video_file <span style="color:#666">=</span> <span style="color:#a2f">next</span>((f <span style="color:#a2f;font-weight:bold">for</span> f <span style="color:#a2f;font-weight:bold">in</span> files <span style="color:#a2f;font-weight:bold">if</span> f<span style="color:#666">.</span>endswith((<span style="color:#b44">&#39;.mkv&#39;</span>, <span style="color:#b44">&#39;.avi&#39;</span>, <span style="color:#b44">&#39;.mp4&#39;</span>))), <span style="color:#a2f;font-weight:bold">None</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span> first_video_file:
</span></span><span style="display:flex;"><span>                file_path <span style="color:#666">=</span> os<span style="color:#666">.</span>path<span style="color:#666">.</span>join(root, first_video_file)
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                    clip <span style="color:#666">=</span> VideoFileClip(file_path)
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#080;font-style:italic"># Check if the video resolution is less than 720p</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">if</span> clip<span style="color:#666">.</span>size[<span style="color:#666">0</span>] <span style="color:#666">&lt;</span> <span style="color:#666">1280</span> <span style="color:#a2f;font-weight:bold">or</span> clip<span style="color:#666">.</span>size[<span style="color:#666">1</span>] <span style="color:#666">&lt;</span> <span style="color:#666">720</span>:
</span></span><span style="display:flex;"><span>                        <span style="color:#080;font-style:italic"># Use shutil.move() instead of os.rename()</span>
</span></span><span style="display:flex;"><span>                        shutil<span style="color:#666">.</span>move(root, os<span style="color:#666">.</span>path<span style="color:#666">.</span>join(inferior_folder, os<span style="color:#666">.</span>path<span style="color:#666">.</span>basename(root)))
</span></span><span style="display:flex;"><span>                        <span style="color:#a2f">print</span>(<span style="color:#b44">f</span><span style="color:#b44">&#39;Moved folder </span><span style="color:#b68;font-weight:bold">{</span>root<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44"> to inferior due to low resolution.&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">except</span> <span style="color:#d2413a;font-weight:bold">UnicodeDecodeError</span> <span style="color:#a2f;font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f">print</span>(<span style="color:#b44">f</span><span style="color:#b44">&#34;Skipping </span><span style="color:#b68;font-weight:bold">{</span>file_path<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44"> due to decoding error: </span><span style="color:#b68;font-weight:bold">{</span>e<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">&#34;</span>)
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">continue</span>  <span style="color:#080;font-style:italic"># Skip this file and continue with the next one</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># Specify the path to the parent folder</span>
</span></span><span style="display:flex;"><span>parent_folder <span style="color:#666">=</span> <span style="color:#b44">&#39;/path/to/your/folder&#39;</span>
</span></span><span style="display:flex;"><span>analyze_and_move_folders(parent_folder)
</span></span></code></pre></div><p>The script uses the moviepy library to analyse movie files. The script works in the following manner -</p>
<ol>
<li>Scan all sub-folders within the root folder for movie files i.e. mkv, avi, and mp4 files</li>
<li>Once a movie file is encountered, analyse this file using moviepy</li>
<li>Find  out the resolution of the movie</li>
<li>If the resolution of the movie is &lt; 1280p horizontally or &lt; 720p vertically, move the file to a folder called &lsquo;inferior&rsquo;</li>
<li>Repeat above steps until all sub-folders within the parent folder have been scanned</li>
</ol>
<p>That&rsquo;s it. The script saved me time and effort from having to load each movie in a video player before deleting it.</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/programming">programming</a></li>
					
					<li><a href="/tags/code">code</a></li>
					
					<li><a href="/tags/python">python</a></li>
					
					<li><a href="/tags/scripts">scripts</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		<div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        var disqus_shortname = 'karanakadam';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></article>
</main>
<footer>
  <div style="display:flex"></div>
  <div class="footer-info">
    2024  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


  


</div>
    </body>
</html>
