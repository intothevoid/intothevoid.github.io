<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Organise Videos By Resolution - Into The Void</title><link rel="icon" type="image/png" href=ZgotmplZ /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Sort video files using a quick and dirty script in Python" />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="https://intothevoid.github.io/2024/05/organise-videos-by-resolution/">
  <meta property="og:site_name" content="Into The Void">
  <meta property="og:title" content="Organise Videos By Resolution">
  <meta property="og:description" content="Sort video files using a quick and dirty script in Python">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-18T21:40:39+09:30">
    <meta property="article:modified_time" content="2024-05-18T21:40:39+09:30">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Code">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Scripts">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Organise Videos By Resolution">
  <meta name="twitter:description" content="Sort video files using a quick and dirty script in Python">
<script src="https://intothevoid.github.io/js/feather.min.js"></script>
	
	
        <link href="https://intothevoid.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://intothevoid.github.io/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css" />

	
	

	
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://intothevoid.github.io/">Into The Void</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		<a href="/contact/">Contact</a>
		
		<a href="/posts/">Posts</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Organise Videos By Resolution</h1>
			<div class="meta">Posted on May 18, 2024</div>
		</div>
		

		<section class="body">
			<p>Recently I was clearing out some old movie rips that I had created from VideoCDs and DVDs many years ago. I wanted a quick and dirty way to organise these i.e. get rid of the videos of resolutions lower than 720p (1280x720)</p>
<p>With LLMs all the rage at the moment, all it took is a few prompts and corrections and in 15 minutes I had this script ready to go -</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> shutil
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">from</span> moviepy.editor <span style="color:#ff6ac1">import</span> VideoFileClip
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">def</span> <span style="color:#57c7ff">analyze_and_move_folders</span>(parent_folder):
</span></span><span style="display:flex;"><span>    <span style="color:#78787e"># Create the &#39;inferior&#39; folder if it doesn&#39;t exist</span>
</span></span><span style="display:flex;"><span>    inferior_folder <span style="color:#ff6ac1">=</span> os<span style="color:#ff6ac1">.</span>path<span style="color:#ff6ac1">.</span>join(parent_folder, <span style="color:#5af78e">&#39;inferior&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">not</span> os<span style="color:#ff6ac1">.</span>path<span style="color:#ff6ac1">.</span>exists(inferior_folder):
</span></span><span style="display:flex;"><span>        os<span style="color:#ff6ac1">.</span>makedirs(inferior_folder)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#78787e"># Walk through all subdirectories</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">for</span> root, dirs, files <span style="color:#ff6ac1">in</span> os<span style="color:#ff6ac1">.</span>walk(parent_folder):
</span></span><span style="display:flex;"><span>        <span style="color:#78787e"># Check if the current directory contains any video files</span>
</span></span><span style="display:flex;"><span>        video_files_found <span style="color:#ff6ac1">=</span> <span style="color:#ff6ac1">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff6ac1">for</span> file <span style="color:#ff6ac1">in</span> files:
</span></span><span style="display:flex;"><span>            <span style="color:#ff6ac1">if</span> file<span style="color:#ff6ac1">.</span>endswith((<span style="color:#5af78e">&#39;.mkv&#39;</span>, <span style="color:#5af78e">&#39;.avi&#39;</span>, <span style="color:#5af78e">&#39;.mp4&#39;</span>)):
</span></span><span style="display:flex;"><span>                video_files_found <span style="color:#ff6ac1">=</span> <span style="color:#ff6ac1">True</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ff6ac1">break</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ff6ac1">if</span> video_files_found:
</span></span><span style="display:flex;"><span>            <span style="color:#78787e"># Load the first video file to check its resolution</span>
</span></span><span style="display:flex;"><span>            first_video_file <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">next</span>((f <span style="color:#ff6ac1">for</span> f <span style="color:#ff6ac1">in</span> files <span style="color:#ff6ac1">if</span> f<span style="color:#ff6ac1">.</span>endswith((<span style="color:#5af78e">&#39;.mkv&#39;</span>, <span style="color:#5af78e">&#39;.avi&#39;</span>, <span style="color:#5af78e">&#39;.mp4&#39;</span>))), <span style="color:#ff6ac1">None</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#ff6ac1">if</span> first_video_file:
</span></span><span style="display:flex;"><span>                file_path <span style="color:#ff6ac1">=</span> os<span style="color:#ff6ac1">.</span>path<span style="color:#ff6ac1">.</span>join(root, first_video_file)
</span></span><span style="display:flex;"><span>                <span style="color:#ff6ac1">try</span>:
</span></span><span style="display:flex;"><span>                    clip <span style="color:#ff6ac1">=</span> VideoFileClip(file_path)
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#78787e"># Check if the video resolution is less than 720p</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ff6ac1">if</span> clip<span style="color:#ff6ac1">.</span>size[<span style="color:#ff9f43">0</span>] <span style="color:#ff6ac1">&lt;</span> <span style="color:#ff9f43">1280</span> <span style="color:#ff6ac1">or</span> clip<span style="color:#ff6ac1">.</span>size[<span style="color:#ff9f43">1</span>] <span style="color:#ff6ac1">&lt;</span> <span style="color:#ff9f43">720</span>:
</span></span><span style="display:flex;"><span>                        <span style="color:#78787e"># Use shutil.move() instead of os.rename()</span>
</span></span><span style="display:flex;"><span>                        shutil<span style="color:#ff6ac1">.</span>move(root, os<span style="color:#ff6ac1">.</span>path<span style="color:#ff6ac1">.</span>join(inferior_folder, os<span style="color:#ff6ac1">.</span>path<span style="color:#ff6ac1">.</span>basename(root)))
</span></span><span style="display:flex;"><span>                        <span style="color:#ff5c57">print</span>(<span style="color:#5af78e">f</span><span style="color:#5af78e">&#39;Moved folder </span><span style="color:#5af78e">{</span>root<span style="color:#5af78e">}</span><span style="color:#5af78e"> to inferior due to low resolution.&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#ff6ac1">except</span> UnicodeDecodeError <span style="color:#ff6ac1">as</span> e:
</span></span><span style="display:flex;"><span>                    <span style="color:#ff5c57">print</span>(<span style="color:#5af78e">f</span><span style="color:#5af78e">&#34;Skipping </span><span style="color:#5af78e">{</span>file_path<span style="color:#5af78e">}</span><span style="color:#5af78e"> due to decoding error: </span><span style="color:#5af78e">{</span>e<span style="color:#5af78e">}</span><span style="color:#5af78e">&#34;</span>)
</span></span><span style="display:flex;"><span>                    <span style="color:#ff6ac1">continue</span>  <span style="color:#78787e"># Skip this file and continue with the next one</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Specify the path to the parent folder</span>
</span></span><span style="display:flex;"><span>parent_folder <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#39;/path/to/your/folder&#39;</span>
</span></span><span style="display:flex;"><span>analyze_and_move_folders(parent_folder)
</span></span></code></pre></div><p>The script uses the moviepy library to analyse movie files. The script works in the following manner -</p>
<ol>
<li>Scan all sub-folders within the root folder for movie files i.e. mkv, avi, and mp4 files</li>
<li>Once a movie file is encountered, analyse this file using moviepy</li>
<li>Find  out the resolution of the movie</li>
<li>If the resolution of the movie is &lt; 1280p horizontally or &lt; 720p vertically, move the file to a folder called &lsquo;inferior&rsquo;</li>
<li>Repeat above steps until all sub-folders within the parent folder have been scanned</li>
</ol>
<p>That&rsquo;s it. The script saved me time and effort from having to load each movie in a video player before deleting it.</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/programming">programming</a></li>
					
					<li><a href="/tags/code">code</a></li>
					
					<li><a href="/tags/python">python</a></li>
					
					<li><a href="/tags/scripts">scripts</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/intothevoid" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://twitter.com/karankadam" rel="me" title="Twitter"><i data-feather="twitter"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2024  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


  


<script>
  feather.replace()
</script></div>
    </body>
</html>
